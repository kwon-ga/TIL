## ✅ 웹서버, nginx vs apache

<br>

### 👉 웹서버

<br>

클라이언트로부터 HTTP 혹은 HTTPS 요청을 받아서 HTML 혹은 CSS, img, js 파일을 전송해주는 프로그램을 의미한다.

<br>

### 👉 apache

<br>

아파치 서버는 요청 하나 당 한 개의 스레드를 만들어서 요청을 처리하는데 이는 동시 접속자가 늘어나는 경우에는 메모리 낭비와 CPU 부하(한 개의 CPU가 여러 프로세스를 처리해야 하므로)가 일어날 수도 있고, 또한 자연스레 연결되는 소켓 수도 증가하는데 아파치에서 소켓 수가 1만개가 넘어가면 하드웨어의 성능과는 상관 없이 더 이상 커넥션을 생성하지 못하는 이슈(C10K)가 있다.

<br>

### 👉 nginx

<br>

NginX는 아파치의 C10K 이슈를 해결하기 위해 등장한 동시접속 처리에 특화된 웹 서버 프로그램이다. 

고정된 프로세스를 생성하여 모든 커넥션들을 이벤트 핸들러를 통해 비동기 방식으로 처리한다.

스레드가 적기 때문에 컨텍스트 스위칭 (문맥교환)에 대한 자원 소모가 적고 CPU 소모가 적으며 흐름이 끊기지 않고 응답이 빠른 장점을 가지고 있다.


엔진엑스에 프록시서버 내용 추가

***


아파치는 요청 하나당 스레드 하나가 생성되어 요청을 처리하게 되는데 동시 접속자 (커넥션)이 많아지게 된다면, 메모리의 낭비로 이어질 수 있고 하나의 CPU가 여러 프로세스를 처리하는 과정에서 CPU의 부하가 올 수 있다. 또한 커넥션이 많아지면 요청을 처리하는 소켓 또한 증가하게 되는데 이 소켓 수가 1만개 이상 증가하게 된다면 하드웨어의 성능과 관계 없이 커넥션을 생성하지 못하는 C10K 이슈가 있다.

이러한 C10K 이슈를 해결하기 위해 등장한게 NGINX 인데 NGINX는 고정된 프로세스가 모든 요청들을 이벤트 핸들러를 통해 비동기처리 하는 방식으로 구동되는데,

이러한 방법은 스레드 수가 적어서 CPU 부하가 줄어들며 컨텍스트 스위칭 (문맥교환)에 소모되는 자원 또한 줄어드는 장점을 가지고 있다.